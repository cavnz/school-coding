<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Juicy Platformer - Year 8 Coding Session</title>
  <link rel="stylesheet" href="style.css?v=1">
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸŽ® Mighty Moa Platformer</h1>
      <p class="subtitle">Making Games Feel Awesome!</p>
    </header>

    <main>
      <section class="intro">
        <h2>Welcome!</h2>
        <p>Today we're learning about changing and configuring code - and how to make games feel satisfying by adding "juice" - screen shake, particles, sounds, and other special effects!</p>

        <p>Inspired by this youtube video: <a href="https://www.youtube.com/watch?v=Fy0aCDmgnxg" target="_blank">Juice It or Lose It</a></p>
      </section>
      
      <section class="showcase">
        <h2>ðŸŒŸ Showcase</h2>
        <p>Get some ideas! <a href="showcase.html">View the Showcase â†’</a></p>
        <p class="coming-soon">(Showcase coming soon - keep an eye out for everyone's awesome creations!)</p>
      </section>

      <section class="quick-start">
        <h2>ðŸš€ Getting Started with JSFiddle</h2>
        <p>Choose your method:</p>

        <div style="text-align: center; margin: 30px 0;">
          <button onclick="openInJSFiddle()" class="copy-btn" style="font-size: 1.2em; padding: 15px 30px; background: #2ecc71;">
            ðŸš€ Open Starter Code in JSFiddle (Easy!)
          </button>
          <p style="margin-top: 10px; color: #7f8c8d;">Auto-creates a JSFiddle with all the code ready to go!</p>
        </div>

        <p style="text-align: center; margin: 20px 0;"><strong>OR</strong></p>

        <p>Manual setup:</p>
        <ol>
          <li>Go to <a href="https://jsfiddle.net/" target="_blank">jsfiddle.net</a> (no login needed!)</li>
          <li>Copy the code from each section below into the matching JSFiddle panel</li>
          <li>Click "Run" to see your game</li>
          <li>Click "Fork" to save your own copy and get a shareable link</li>
        </ol>

        <div class="code-boxes">
          <div class="code-box">
            <h3>HTML Tab</h3>
            <p>Copy this into the HTML section:</p>
            <button class="copy-btn" onclick="copyCode('html-code')">ðŸ“‹ Copy HTML</button>
            <pre><code id="html-code">&lt;h1&gt;Juicy Platformer&lt;/h1&gt;
&lt;canvas id="gameCanvas" width="800" height="600"&gt;&lt;/canvas&gt;
&lt;div class="info"&gt;Use Arrow Keys or WASD to move â€¢ Space to jump&lt;/div&gt;

&lt;!-- TODO: Uncomment below to show score when you add coins! --&gt;
&lt;!--
&lt;div id="scoreDisplay" class="score"&gt;
  Score: &lt;span id="score"&gt;0&lt;/span&gt;
&lt;/div&gt;
--&gt;</code></pre>
          </div>

          <div class="code-box">
            <h3>CSS Tab</h3>
            <p>Copy this into the CSS section:</p>
            <button class="copy-btn" onclick="copyCode('css-code')">ðŸ“‹ Copy CSS</button>
            <div class="link-box">
              <a href="showcase/01-starter/style.css" target="_blank" class="view-link">View CSS File â†’</a>
            </div>
          </div>

          <div class="code-box">
            <h3>JS Tab</h3>
            <p>Copy this into the JavaScript section:</p>
            <button class="copy-btn" onclick="copyCode('js-code')">ðŸ“‹ Copy JavaScript</button>
            <div class="link-box">
              <a href="showcase/01-starter/game.js" target="_blank" class="view-link">View JS File â†’</a>
            </div>
          </div>
        </div>
      </section>

      <section class="activities">
        <h2>ðŸŽ¯ Activities</h2>

        <div class="activity">
          <h3>Part 1: Experiment with Physics</h3>
          <p>At the top of the JavaScript, try changing these values:</p>
          <ul>
            <li><code>GRAVITY = 0.5</code> â†’ Try 0.2 (moon) or 1.5 (heavy)</li>
            <li><code>JUMP_POWER = 12</code> â†’ Try 8 (low) or 20 (super jump)</li>
            <li><code>PLAYER_SPEED = 5</code> â†’ Try 2 (slow) or 10 (fast)</li>
            <li><code>FRICTION = 0.8</code> â†’ Try 0.95 (ice) or 0.5 (sticky)</li>
          </ul>
        </div>

        <div class="activity">
          <h3>Part 2: Add Coins & Scoring</h3>
          <ol>
            <li>In the HTML tab, uncomment the score display</li>
            <li>Change <code>NUMBER_OF_COINS</code> to see more/fewer coins</li>
            <li>Experiment with <code>POINTS_PER_COIN</code> and <code>COIN_SIZE</code></li>
          </ol>
        </div>

        <div class="activity">
          <h3>Part 3: Make It Juicy!</h3>
          <p>Find the <code>TODO</code> comments in the code and uncomment the suggested effects:</p>
          <ul>
            <li><strong>Jump effects:</strong> <code>screenShake(3)</code> and <code>beep(440, 100, 0.2)</code></li>
            <li><strong>Land effects:</strong> <code>screenShake(5)</code> and <code>beep(220, 50, 0.3)</code></li>
            <li><strong>Coin collection:</strong> <code>spawnParticles()</code>, <code>screenShake()</code>, and <code>beep()</code></li>
            <li><strong>All coins collected:</strong> Make an epic celebration!</li>
          </ul>
        </div>
      </section>


      <section class="resources">
        <h2>ðŸ“š Resources</h2>
        <ul>
          <li><a href="https://github.com/cavnz/school-coding" target="_blank">View Source Code on GitHub</a></li>
          <li><a href="https://github.com/cavnz/school-coding/blob/main/README.md" target="_blank">Full README</a></li>
          <li><a href="demo.html" target="_blank">Play the Demo</a></li>
        </ul>
      </section>
    </main>

    <footer>
      <p>Have fun! The best way to learn coding is to experiment and break things! ðŸš€</p>
    </footer>
  </div>

  <script>
    function copyCode(elementId) {
      const element = document.getElementById(elementId);
      const text = element.textContent;

      navigator.clipboard.writeText(text).then(() => {
        // Show feedback
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'âœ… Copied!';
        btn.style.background = '#2ecc71';

        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '';
        }, 2000);
      }).catch(err => {
        alert('Failed to copy. Please select and copy manually.');
      });
    }

    async function openInJSFiddle() {
      try {
        // Fetch the starter code files
        const [htmlRes, cssRes, jsRes] = await Promise.all([
          fetch('showcase/01-starter/index.html'),
          fetch('showcase/01-starter/style.css'),
          fetch('showcase/01-starter/game.js')
        ]);

        const htmlFull = await htmlRes.text();
        const css = await cssRes.text();
        const js = await jsRes.text();

        // Extract just the body content from HTML (JSFiddle doesn't need full HTML structure)
        const bodyMatch = htmlFull.match(/<body[^>]*>([\s\S]*)<\/body>/i);
        const html = bodyMatch ? bodyMatch[1].replace(/<script[^>]*>.*?<\/script>/gi, '').trim() : htmlFull;

        // Create a form and POST to JSFiddle
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = 'https://jsfiddle.net/api/post/library/pure/';
        form.target = '_blank';

        // Add form fields
        const fields = {
          html: html,
          css: css,
          js: js,
          title: 'Juicy Platformer - Year 8 Coding Session',
          wrap: 'b'  // Wrap JS at bottom of body
        };

        for (const [key, value] of Object.entries(fields)) {
          const input = document.createElement('input');
          input.type = 'hidden';
          input.name = key;
          input.value = value;
          form.appendChild(input);
        }

        document.body.appendChild(form);
        form.submit();
        document.body.removeChild(form);
      } catch (error) {
        console.error('Error creating JSFiddle:', error);
        alert('Failed to create JSFiddle. Please try the manual setup below.');
      }
    }
  </script>
</body>
</html>
