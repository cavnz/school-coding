<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juicy Platformer - Year 8 Coding Session</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #2c3e50;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
        }

        h1 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        #gameCanvas {
            border: 3px solid #ecf0f1;
            background: #34495e;
            display: block;
        }

        .info {
            margin-top: 10px;
            font-size: 14px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Juicy Platformer</h1>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div class="info">
        Use Arrow Keys or WASD to move â€¢ Space to jump
    </div>

    <script>
        // =============================================
        // ðŸŽ® GAME CONFIGURATION
        // =============================================
        // EXPERIMENT WITH THESE VALUES!
        // Try changing them and refreshing the page to see what happens

        // Physics Settings
        const GRAVITY = 0.5;           // How fast things fall (try 0.3 or 1.0)
        const JUMP_POWER = 12;         // How high you jump (try 8 or 15)
        const PLAYER_SPEED = 5;        // How fast you move left/right (try 3 or 8)
        const FRICTION = 0.8;          // How slippery the ground is (0.9 = ice, 0.5 = sticky)

        // Visual Settings
        const PLAYER_SIZE = 30;        // Size of your character (try 20 or 50)
        const PLAYER_COLOR = '#3498db'; // Color of player (try '#e74c3c' or '#2ecc71')

        // =============================================
        // ðŸŽ¨ CANVAS SETUP
        // =============================================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // =============================================
        // ðŸŽ¯ GAME STATE
        // =============================================
        const player = {
            x: 100,
            y: 100,
            width: PLAYER_SIZE,
            height: PLAYER_SIZE,
            velocityX: 0,
            velocityY: 0,
            isOnGround: false
        };

        // Platforms to jump on
        const platforms = [
            { x: 0, y: 550, width: 800, height: 50 },      // Ground
            { x: 200, y: 450, width: 150, height: 20 },    // Platform 1
            { x: 450, y: 350, width: 150, height: 20 },    // Platform 2
            { x: 150, y: 250, width: 100, height: 20 },    // Platform 3
            { x: 600, y: 200, width: 120, height: 20 }     // Platform 4
        ];

        // Keyboard input tracking
        const keys = {};

        // =============================================
        // âŒ¨ï¸ INPUT HANDLING
        // =============================================
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // =============================================
        // ðŸŽ® GAME FUNCTIONS
        // =============================================

        function jump() {
            if (player.isOnGround) {
                player.velocityY = -JUMP_POWER;
                player.isOnGround = false;

                // TODO: Add juice here! What should happen when you jump?
                // Try calling: screenShake(3)
            }
        }

        function land() {
            player.velocityY = 0;
            player.isOnGround = true;

            // TODO: Add juice here! What should happen when you land?
            // Try calling: screenShake(5)
        }

        function handleInput() {
            // Left/Right movement
            if (keys['ArrowLeft'] || keys['a'] || keys['A']) {
                player.velocityX = -PLAYER_SPEED;
            } else if (keys['ArrowRight'] || keys['d'] || keys['D']) {
                player.velocityX = PLAYER_SPEED;
            } else {
                player.velocityX *= FRICTION; // Slow down when no key pressed
            }

            // Jumping
            if (keys['ArrowUp'] || keys['w'] || keys['W'] || keys[' ']) {
                jump();
            }
        }

        function applyPhysics() {
            // Apply gravity
            player.velocityY += GRAVITY;

            // Update position based on velocity
            player.x += player.velocityX;
            player.y += player.velocityY;

            // Keep player on screen (left/right bounds)
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) {
                player.x = canvas.width - player.width;
            }

            // Reset ground status (will be set to true if colliding with platform)
            player.isOnGround = false;
        }

        function checkCollisions() {
            // Check collision with each platform
            for (const platform of platforms) {
                // Check if player is overlapping with platform
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y < platform.y + platform.height &&
                    player.y + player.height > platform.y) {

                    // Player is falling and hits platform from above
                    if (player.velocityY > 0 &&
                        player.y + player.height - player.velocityY <= platform.y) {
                        player.y = platform.y - player.height;
                        land();
                    }
                }
            }
        }

        function update() {
            handleInput();
            applyPhysics();
            checkCollisions();
        }

        function render() {
            // Clear screen
            ctx.fillStyle = '#34495e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw platforms
            ctx.fillStyle = '#95a5a6';
            for (const platform of platforms) {
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
            }

            // Draw player
            ctx.fillStyle = PLAYER_COLOR;
            ctx.fillRect(player.x, player.y, player.width, player.height);
        }

        // =============================================
        // ðŸ” GAME LOOP
        // =============================================
        // This is the "chain reaction"!
        // Every frame: update â†’ render â†’ repeat
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // Start the game!
        gameLoop();

    </script>
</body>
</html>
